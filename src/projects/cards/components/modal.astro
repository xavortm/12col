---
interface Props {
	id: string;
	labelledby: string;
	role?: string;
	width?: string;
}

const { id, labelledby, role, width } = Astro.props;
const style = width ? `--modal-width: ${width}` : undefined;
---

<dialog class="modal" id={id} role={role} aria-labelledby={labelledby} style={style}>
	<div class="modal__content">
		<slot />
	</div>
</dialog>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		document.querySelectorAll<HTMLDialogElement>('.modal').forEach((dialog) => {
			dialog.addEventListener('click', (e) => {
				if (e.target === dialog) dialog.close();
			});
		});
	});
</script>
